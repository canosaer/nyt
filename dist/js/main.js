class NYT_SearchAPI{API_BASE_URL="https://api.nytimes.com/svc/search/v2/articlesearch.json";API_KEY="s1jci6o1poZJW3TJJdvuxK9q6bzo3U80";constructor(){this.searchInput=document.querySelector('input[name="term"]'),this.dateFilter=!1,this.menuButton=document.querySelector(".search-menu__active"),this.firstOpen=!0,this.sortList=document.querySelector(".search-menu__sort-list"),this.sortText=document.querySelector(".search-menu__text"),this.setupListener()}setupListener(){const e=document.querySelector(".search-controls__button"),t=document.querySelector(".date-range__clickable");e.addEventListener("click",this.handleSearch),this.searchInput.addEventListener("keyup",this.checkForEnter),t.addEventListener("click",this.handleDateRangeClick),this.menuButton.addEventListener("click",this.handleMenuClick)}handleDateRangeClick=e=>{const t=document.querySelector(".date-range__symbol"),s=document.querySelector(".date-range__input");s.classList.contains("hidden")?(s.classList.remove("hidden"),t.textContent="< >",this.dateFilter=!0):(s.classList.add("hidden"),t.textContent="><",this.dateFilter=!1)};handleMenuClick=e=>{if(this.sortList.classList.toggle("hidden"),this.firstOpen){let e=document.querySelectorAll(".search-menu__item");this.firstOpen=!1,e.forEach((e=>{e.addEventListener("click",this.handleMenuItemClick)}))}};handleMenuItemClick=e=>{this.sortText.textContent!=e.target.textContent&&(this.sortText.textContent=e.target.textContent,this.searchInput.value&&this.handleSearch()),this.sortList.classList.toggle("hidden")};handleSearch=e=>{const t=document.querySelector(".date-range__input-field_begin"),s=document.querySelector(".date-range__input-field_end");let n="relevance";-1!==this.sortText.textContent.indexOf("Newest")?n="newest":-1!==this.sortText.textContent.indexOf("Oldest")&&(n="oldest");const a={q:this.searchInput.value,"api-key":this.API_KEY,sort:n};this.dateFilter&&t.value?a.begin_date=this.removeDateDashes(t.value):a.begin_date=null,this.dateFilter&&s.value?a.end_date=this.removeDateDashes(s.value):a.end_date=null,axios.get(this.API_BASE_URL,{params:a}).then(this.processResults)};removeDateDashes=e=>e.slice(0,4)+e.slice(5,7)+e.slice(8,10);checkForEnter=e=>{"Enter"===e.key&&this.handleSearch()};processResults=e=>{const t=e.data.response.docs,s=document.querySelector(".results"),n=s.querySelectorAll("*");n&&n.forEach((e=>{e.remove()})),console.log(t),t.forEach((e=>{let t=document.createElement("div");t.classList.add("results__row");let n=document.createElement("p");n.classList.add("results__date");let a=this.parseDate(e.pub_date);n.textContent=a,t.appendChild(n);let l=document.createElement("h3");l.classList.add("results__section"),l.textContent=e.section_name,t.appendChild(l);let i=document.createElement("a");i.href=e.web_url,i.setAttribute("target","_blank"),i.classList.add("results__title"),i.textContent=e.headline.main,t.appendChild(i);let r=document.createElement("p");r.classList.add("results__abstract"),r.textContent=e.abstract,t.appendChild(r);let c=document.createElement("p");c.classList.add("results__byline"),c.textContent=e.byline.original,t.appendChild(c);let d=document.createElement("a");d.classList.add("results__photo"),0!==e.multimedia.length&&(d.style.background=`url("https://www.nytimes.com/${e.multimedia[0].url}")`),d.style.backgroundSize="cover",d.style.backgroundPoisition="center",t.appendChild(d),d.href=e.web_url,d.setAttribute("target","_blank"),s.appendChild(t)}))};parseDate=e=>{let t="",s=e.slice(0,4),n=e.slice(5,7);t="01"===n?"Jan. ":"02"===n?"Feb. ":"03"===n?"Mar. ":"04"===n?"Apr. ":"05"===n?"May ":"06"===n?"Jun. ":"07"===n?"Jul. ":"08"===n?"Aug. ":"09"===n?"Sept. ":"10"===n?"Oct. ":"11"===n?"Nov. ":"12"===n?"Dec. ":"";let a=e.slice(8,10);return"0"===a[0]&&(a=a.substring(1,3)),a+=", ",t+a+s}}new NYT_SearchAPI;
//# sourceMappingURL=main.js.map