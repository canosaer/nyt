class NYT_SearchAPI{API_BASE_URL="https://api.nytimes.com/svc/search/v2/articlesearch.json";API_KEY="s1jci6o1poZJW3TJJdvuxK9q6bzo3U80";constructor(){this.searchInput=document.querySelector('input[name="term"]'),this.dateFilter=!1,this.setupListener()}setupListener(){const e=document.querySelector(".search-controls__button"),t=document.querySelector(".date-range__clickable");e.addEventListener("click",this.handleSearch),this.searchInput.addEventListener("keyup",this.checkForEnter),t.addEventListener("click",this.handleDateRangeClick)}handleDateRangeClick=e=>{const t=document.querySelector(".date-range__symbol"),s=document.querySelector(".date-range__input");"none"===window.getComputedStyle(s).getPropertyValue("display")?(s.style.display="flex",t.textContent="< >",this.dateFilter=!0):(s.style.display="none",t.textContent="><",this.dateFilter=!1)};handleSearch=e=>{const t=document.querySelector(".date-range__input-field_begin"),s=document.querySelector(".date-range__input-field_end"),a={q:this.searchInput.value,"api-key":this.API_KEY,sort:"relevance"};this.dateFilter&&t.value?a.begin_date=this.removeDateDashes(t.value):a.begin_date=null,this.dateFilter&&s.value?a.end_date=this.removeDateDashes(s.value):a.end_date=null,axios.get(this.API_BASE_URL,{params:a}).then(this.processResults)};removeDateDashes=e=>e.slice(0,4)+e.slice(5,7)+e.slice(8,10);checkForEnter=e=>{"Enter"===e.key&&this.handleSearch()};processResults=e=>{const t=e.data.response.docs,s=document.querySelector(".results"),a=s.querySelectorAll("*");a&&a.forEach((e=>{e.remove()})),console.log(t),t.forEach((e=>{let t=document.createElement("div");t.classList.add("results__row");let a=document.createElement("p");a.classList.add("results__date");let n=this.parseDate(e.pub_date);a.textContent=n,t.appendChild(a);let l=document.createElement("h3");l.classList.add("results__section"),l.textContent=e.section_name,t.appendChild(l);let r=document.createElement("a");r.href=e.web_url,r.setAttribute("target","_blank"),r.classList.add("results__title"),r.textContent=e.headline.main,t.appendChild(r);let c=document.createElement("p");c.classList.add("results__abstract"),c.textContent=e.abstract,t.appendChild(c);let i=document.createElement("p");i.classList.add("results__byline"),i.textContent=e.byline.original,t.appendChild(i);let d=document.createElement("a");d.classList.add("results__photo"),0!==e.multimedia.length&&(d.style.background=`url("https://www.nytimes.com/${e.multimedia[16].url}")`),d.style.backgroundSize="cover",d.style.backgroundPoisition="center",t.appendChild(d),d.href=e.web_url,d.setAttribute("target","_blank"),s.appendChild(t)}))};parseDate=e=>{let t="",s=e.slice(0,4),a=e.slice(5,7);t="01"===a?"Jan. ":"02"===a?"Feb. ":"03"===a?"Mar. ":"04"===a?"Apr. ":"05"===a?"May ":"06"===a?"Jun. ":"07"===a?"Jul. ":"08"===a?"Aug. ":"09"===a?"Sept. ":"10"===a?"Oct. ":"11"===a?"Nov. ":"12"===a?"Dec. ":"";let n=e.slice(8,10);return"0"===n[0]&&(n=n.substring(1,3)),n+=", ",t+n+s}}new NYT_SearchAPI;
//# sourceMappingURL=main.js.map